				
				React 
.............................................................................................

What is react?
React architecture?
How to create UI apps using react?

What is react?
 A JavaScript library for building user interfaces.

What is lib and framework?

 lib solves only one problem where as framework provides every thing end to end to build apps

What is user interfaces? How to build them?

Userface : where user interacts.
 eg: desk apps,web interfaces(browser apps),mobile apps,any other device apps(tv...)
1.Browsers App
   How to create browser apps
   -tech stack - html,css,js.
2.Mobile App

React can help to create apps using html,css js- abstraction for these tech stack.


React features

1.declarative lib
pl can be classified into

1.declarative pl----libs/frameworks
2.imperative pl---libs/frameworks


1.Imperative
   
let customers = [{id:1,name:'a',city:'test'}];

i want find out all customers in chennai city.

function findCustomerByCity(city){
  let result = [];
 for(let i=0;i<customers.length;i++){
    let customer  =customers[i];
   //logic
   if(customer.city === city){
	  result.push(customer);
   }

}
  return result
}

findCustomerByCity('chennai');

2.Declarative

function findCustomerByCity(city){
     return customers.filter(customer=>customer.city == city);
}

findCustomerByCity('chennai');

Declarative code make your code more predictable and easier to debug.
...........................................................................................
HTML:

1.HTML IS PL? - YES
2.HTML Is compiled -YES
3.HTML is excuted-YES


java
  -source .java
 -compile -.class -assembly
 -excute -jvm--result

HTML internal work flow:
........................

index.html -source code
<html>
<head></head>
<title><title>
<body>
  <div>
     <h1>Welcome</h1>
  </div>
</body>
</html>
-------------------Browser
loader---LOAD Code into browser
 |
   from file: or http:
 |
Parser : Parser is special compiler which converts source into lexcial tree(string tree)
 |
body
  div
     h1
        Welcome 
     h1
  div
body
|
 Complier-Compilation : Convert this into assembly
|
body -load xxx
  div
     h1
        Welcome 
     h1
  div
body
|
-------------------------Execution cycle------------------------------------
HTML Execution engine : Request Os ,to allocate memory :Runtime

-LinkedList
body -Node
  div -Node
     h1 -Node
        Welcome -Node
     h1
  div
body
| 
 Linking the Nodes: Tree
body  -Node
  |
  div -Node
    |
     h1 -Node
      |
        Welcome -Node
        |
     h1
  div
body
|
Layout/Paint Engine: will convert nodes into pxs : final output


..............................................................................................
Static web pages: htmls are displayed into browser.
..............................................................................................
In 1996,Netscap communication,Started an RND project called "How to manipulate the tree"

Tree is written in c language,then we need another c program to communicate.


But NETSCAP decided not to use C pl.

Netscap wanted to put java like implementation inside browser to manipulate "Tree".

that is birth of javascript.

How to access nodes from javascript engine?
  
One spec was published ,As per that spec
 "Document Object Model"
    -How to represent document(elements/nodes) in object oriented way.->DOM

 "Documents can be reprsented as Objects" : Object oriented Document Programming.
............................................................................................

How dom works?

index.html           Broser runtime(C program)         Javascript Engine
<h1>Hello</h1>       h1-Node                           h1- Object
			Hello-Node			 Hello Object Property



                 Every Html ELEMENT Inside Browser is "C Program"

	         Every Html ELEMENT javascript engine is "Object"


javascript developer ---->uses api --->to communicate Object---->js engine---->browser engine.	*******************************************************************************************	
Who and when "H1" object is created?

if you want to create object?

 class/ function

function Employee(){}  let emp = new Employee()


<h1> => function HTMLHeadingElement(){} => let h =new HTMLHeadingElement() ?



if you want to create object?

 class/ function

function Employee(){}  let emp = new Employee()

<h1> => function HTMLHeadingElement(){} => let h =new HTMLHeadingElement() ?

Note: For html elements, we cant create object directly, rather than JS Engine will create objects , return references to the developer to access.
 How via factory Objects: object helps to get other documents


Factory Object : HTML Document =>body

document.getElementById();
   |
Implicit object reference variable which points HTMLDocument OBject.

.............................................................................................

What is our objective here? DOM Programming?


Enter into DOM programming:

1.write dom programming using javascript language.

<body>
  |
HTMLDocument : body : factory Object


Document apis:

Finding HTML Elements

HTMLElement document.getElementById(id)	       Find an element by element id


HTMLElement Document document.getElementsByTagName(name)	Find elements by tag name


HTMLElement document.getElementsByClassName(name)	Find elements by class name


HTMLElement document.querySelectory(selector)        find element/elements by selector


Changing HTML Elements : update existing element
......................
element.innerHTML =  new html content	Change the inner HTML of an element
element.attribute = new value	Change the attribute value of an HTML element
element.style.property = new style	Change the style of an HTML element
Method	Description
element.setAttribute(attribute, value)	Change the attribute value of an HTML element

Adding and Deleting Elements

document.createElement(element)	Create an HTML element

document.removeChild(element)	Remove an HTML element

document.appendChild(element)	Add an HTML element

document.replaceChild(new, old)	Replace an HTML element

////////////////////////////////////////////////////////////////////////////////////////////

DOM programming :

Create new Element:

1.create element
2.attach that element on existing tree. appendChild

function findElement() {
      //get the h1
      const element = document.getElementById('heading');
      console.dir(element);
      //get the content
      console.log(element.innerHTML);
}
findElement();

function updateElement() {
      const element = document.getElementById('heading');
      //element.innerText = 'Welcome to React' : Plain String
      element.innerHTML = 'Welcome to React!'; // which is node
}
updateElement()

function createElement() {
      const element = document.createElement('h2');
      element.innerHTML = 'Hey Buddy Are you new to DOM!';
      //attach that element
      document.body.appendChild(element);
}
createElement();

function applyStyle() {
      const element = document.getElementById('heading');
      //css property inside javascript
      element.style.backgroundColor = 'yellow'

}
applyStyle()

User interaction : Event Handling : UI events

Hardware events : mouse,keyboard,touch events
application events : onload,onupdate,offline,online........

How to add user interaction?

Every dom element has ability to subscribe events called dom events.

ways to attach events?

1.inline events
2.through coding

eventattachment has syntax

on+EventName = "callbackfunction /handler function"

Event Object : Object asscioated with every dom element.

 Which is proxy object between dom element and handler function.

if you want to access any dom element inside event handler, event object will help
event object is created and ready for use inside handler function arg.


 <h1 id="heading" onmouseout="applyMouseOut(event)" onmouseover="applyDynamicStyle(event)">Welcome to DOM</h1>

function applyDynamicStyle(e) {
      console.dir(e);
      const element = e.target;
      console.log(element);
      element.style.backgroundColor = 'green'

}

function applyMouseOut(e) {
      const element = e.target;
      element.style.backgroundColor = 'yellow'
}


<h1 id="heading">Welcome to DOM</h1>

function applyDynamicStyle(e) {
      console.dir(e);
      const element = e.target;
      console.log(element);
      element.style.backgroundColor = 'green'

}
function applyMouseOut(e) {
      const element = e.target;
      element.style.backgroundColor = 'yellow'
}

document.getElementById('heading').addEventListener('mouseover', applyDynamicStyle)

document.getElementById('heading').addEventListener('mouseout', applyMouseOut);
//////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////


javascript language can be used to manipulate web documents.

When we use javascript language directly , we face lot of problems

1.Complexity
2.Performance
3.No standard practice

In 2001,DOM Wrappers - libs /frameworks came into picture.
DOJO
2005, JQuery
/////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////

Architecture tech stack for dom programming


Plain JS
			 Application(dom) -plain js
			     |
			 Javascript Engine
			      |
			  Browser Engine




Framework/lib
			 Application(JQuery)
			     |
		       ---------------------------
			  JQuery Engine	------javascript programming		
                       -------------------------------
			      |
			 Javascript Engine
			      |
			  Browser Engine



What is jquery engine?
  Jquery engine is also javascript program.




Angular
			 Application(Angular)
			     |
		       ---------------------------
			  Angular Engine : Renderer(Ng2) Renderer2(Ng4,5),Ivy(6,7)		
                       -------------------------------
			      |
			 Javascript Engine
			      |
			  Browser Engine



React


		       Application(React)
			     |
		       ---------------------------
	           React Engine :React fiber-->React 16 on wards		
                       -------------------------------
			      |
			 Javascript Engine
			      |
			  Browser Engine


React is created by face book.

React was created not for others but created for face book one of the use case called "Buddylist" / chat application.

instagram web version was fully built by react.

React most implementations

1.flipkart ui is written react.
2.espn cric info
3.facebook use case chat , graph....
4.netflix
etc......

Where we can use React ? What type of application we can build using react.


Data intensive application // Data driven app
 where more data , which are chainging rapidly, where you want to update ui very faster with out ui flickering.


React can be used to build application for 

.........................................
1.browsers : Desktop
2.Mobile Apps : React Native
.......................................................................................


face book is working on many futures projects related to react

3.React VR : Virtual Reality.
4.React Car : For car applications
5.React TV  : React for TV.
6.React IOT : any devices

We are going to learn react web for browsers.

React core modules:

react.js      => Core module
react-dom.js  => Browser

-----------------------------------------------------------------------------
 Markup layer             |  React Core Engine    | Render Engine   | Target
-----------------------------------------------------------------------------

HTML Markup---------------|  Object Tree(V.DOM)   | ReactDom.render |  Browser

Mobile Markup-------------|  Object Tree          |ReactNative.render| Mobile /Tabs

VR Markup---------------  |  Object Tree          |VR.render         |VR devices

IOT Markup--------------- |  Object Tree          | IOT.render       |IOT Devices   

Object Tree :

Note : in js every html element is object, in browser every element is node which forms tree


<div>
   <h1>
       hello
   </h1>
       |
       div
          |
          h1
            hello

         |
         divObject
		|
		H1 Object
			hello


		|
		React engine
		   |
		   
////////////////////////////////////////////////////////////////////////////////////////////

				React Project Setup
............................................................................................

npm install create-react-app  -g


npx  create-react-app  my-app

npx create-react-app my-app --template typescript
.....................................................................................

DOM ELEMENT Creation using js
//dom element creation using plain javascript.

function createElement() {
    let Heading = document.createElement('h1')
    console.dir(Heading);
    Heading.innerHTML = 'React!!!'
    Heading.style.color = 'red';
    Heading.style.backgroundColor='yellow';
    //we need to add this h1 on existing tree
    document.getElementById('root').appendChild(Heading)
}
createElement();

DOM ELEMENT Creation using React.

//DOM element creation using React.

import React from 'react'; // react.js
import ReactDOM from 'react-dom' //react-dom.js

//dom object creation.

//document.createElement 
const Heading = <h1>React!!!</h1> //  let Heading = document.createElement('h1')

//Rendering : insert dom node into browser
ReactDOM.render(Heading,document.getElementById('root'))
   

DOM Element means object
   let Heading = document.createElement('h1')
React Element means Object
 const Heading = <h1>React!!!</h1> 

React element is wrapper around dom element, we cant access any dom properties directly inside
react.

Means we are not creating any real dom element rather we create "virtual element", virtual DOM.

////////////////////////////////////////////////////////////////////////////////////////////

				React Project Setup
............................................................................................

npm install create-react-app  -g


create-react-app gives

1.webpack


//dom element using java script

function createHeadElement() {
    console.log('dom  is being initalized')
    //create Element
    const divElement = document.getElementById('root')
    element.innerHTML = 'Hello React!'
    divElement.appendChild(element)
}
createHeadElement();
...........................................................................................

dom element using react.

import React from 'react';
import ReactDOM from 'react-dom';

//declare dom element
const HeadElement = <h1>Hello!</h1>;
//render into browser
ReactDOM.render(HeadElement,document.getElementById('root'))
.............................................................................................
			JSX - java script and XML - langugage to create User interfaces
............................................................................................

React uses declarative dom programing using a mini language invented by facebook : JSX

JSX : - javascript xml

 1.PL language built by face book to write user interfaces.
 2.JSX is collection of html markup and javascript.
 3.JSX is dsl and declarative.
 4.Every device has its own jsx language syntax.
 5.Browsers jsx can't be used for building mobile application.

	"Since jsx  is a language cant be executed on browser /mobile directly."


JSX compilation model:

                   layout.js / layout.jsx /layout.tsx
		       |
		    compiler - babel.js 
			|
		    plain js code
			|-----------------------Dev cycle
	----------------------------------------- -- Excution cycles Starts
  Runtime : React Engine  compiled code feed into react engine
			|
		 Excute compiled js code : function calls
			|
	     create virtual Object tree (in browser V-dom)
		        |
		     Render Engine ; will convert react object tree into js dom object tree
			|
		   Flush the tree into target
			|
	--------------------------------------------
        |
     Browser
//////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////

JSX is used to create dom elements.

Every DOM element is object.

What is Component ?
  Component is Object , Coined by MS in 1989.

According to ms, Component is object which has state(date),behaviour(methods) + User interface(Visual).
 eg:Button,TextBox,Grid,Menu,MenuBar,Layout,Table.....

Like Object tree(DOM Tree), In React we can create "Component" Tree.


      Node===DOM Object====Component
       h1     HTMLHeading   Heading
..................................................................................

..................................................................................



In coding 

Threre two libs 
1.react.js  => to create component and manages all features related component.
2.react-dom => Render engine.

react.js

1.React
  It top level class which provides all apis to create,delete,update components.


react-dom.js

2.ReactDOM
   It is top level class which provides api to flush the v.dom into real dom.

/////////////////////////////////////////////////////////////////////////////////////////////

Terminalogy:

Node -  HTML
DOM  ELEMENT - JS 
Component -  React 

h1  -node
HeadingElement - JS object

Heading -Component.

 node === dom object === component
.........................................................................................

In react we create component means , we create dom object, we create node....

when create collection of nodes 
   tree
   dom tree
   component tree.

First Component:

//create a simple component
import React from 'react';
import ReactDOM from 'react-dom' //render engine: browser

//create component using jsx language 
const Heading = <h1>Hello React!</h1>;

//render Heading into browser
ReactDOM.render(Heading,document.getElementById('root'))
///////////////////////////////////////////////////////////////////////////////////////////

Component Creational Patterns

1.variable pattern
2.function pattern
3.es 6 class pattern


1.variable pattern
..................
//component creational pattern : variable pattern
import React from 'react';
import ReactDOM from 'react-dom' //render engine: browser

//create component using jsx language 
const Heading = <h1>Hello React!</h1>;
console.log(Heading);

//render Heading into browser
ReactDOM.render(Heading,document.getElementById('root'))


2.functions
import React from 'react';
import ReactDOM from 'react-dom';


//create component
// function Heading(){
//     return <h1>Hello!</h1>; //return jsx - object
// }
const Heading = () => <h1>Hello!</h1>; //return jsx - object


//imperative function call
// ReactDOM.render(Heading(),document.getElementById('root'))
//declarative
ReactDOM.render(<Heading></Heading>, document.getElementById('root'))

3.class

import React from 'react';
import ReactDOM from 'react-dom';


class Heading extends React.Component {
   
    render(){
       return <h1>Hello React!</h1>
    }
}

ReactDOM.render(<Heading></Heading>, document.getElementById('root'))
..............................................................................................

JSX : javascript + XML:

Since HTML parser is weak, but when y write react code, we need consistent code generation.

So that react team, developed compiler follows basic xml rules.

<div>
<h1> </h1>
<p>
<img />
</div>

Basic XML  rules:

1.every opened element must be closed
  <h1>Hello</h1>
  <Welcome></Welcome>
 some elements may not have closing tag
  <img /> : image element has no child elements : self closing. 

2. In xml you must have one single root element.
  all elements must be organized under single root element.

 <h1>Welcome to React</h1>
 <p>Path finder</p>

In html what can be root element
 <div>,<span>,all html 5 layout elements header,footer,section,aside...



import React from 'react';
import ReactDOM from 'react-dom';

//invalid jsx
//const Heading = () => <h1>Hello!
// const Heading = () =><h1>Hello</h1><p>Welcome</p>

const Heading = () => <div>
    <h1>Hello</h1>
    <p>Welcome</p>
</div>;

ReactDOM.render(<Heading></Heading>, document.getElementById('root'))

........................

How code gets compiled?

source code:

function Welcome() {
      return <h1>Welcome To React!</h1>;
}
|
babel
|
compiled code
function Welcome() {
  return React.createElement(
    'h1',
    null,
    'Welcome To React!'
  );
}
|
runtime : react engine
function Welcome() {
  return React.createElement(
    'h1',
    null,
    'Welcome To React!'
  );
}
|
//React.createElement
function createElement(args){
   document.createElement(args); // low level api call
}
///////////////////////////////////////////////////////////////////////////////////////////
				 React App Architecture
...........................................................................................

React app is collection of react components.
React components are organized as tree - componment tree

Component tree is representation of "html tree".

import React from 'react';
import ReactDOM from 'react-dom';

const Header = () => <nav>
    <h2>IBS</h2>
</nav>

const Body = () => <div>
    <p>
        Embracing modern technology tears down the barriers to innovation and enables greater collaboration across the value chain. Forward-looking customer-centric systems, designed on modern architectures drive profitable and efficient business growth. While cloud-based platforms provide the flexibility to quickly adapt to rapidly changing market and consumer behavior, and deliver more brand engagement opportunities.

        From airline passenger services, air cargo management, loyalty management, to flight and crew operations, leading airlines worldwide turn to IBS Software to power their success. Our modular and mission-critical airline solutions cut across airline needs, end-to-end, so our customers can enjoy full platform integration or specific components. And that makes IBS Software unique in the travel industry.
    </p>
</div>
const Footer = () => <nav>
    <h2>IBS @ Copy right</h2>
</nav>

const Layout = () => <div>
    <Header />
    <Body />
    <Footer />
</div>

const Page = () => <Layout />
//APP/Application
const App = () => <Page />


ReactDOM.render(<App />, document.getElementById('root'))

How to visualize the tree?
  
  -React dev tool
..............................................................................................
Modularity : Structure of React apps.
 
Is there a recommended way to structure React projects?
React doesnâ€™t have opinions on how you put files into folders. That said there are a few common approaches popular in the ecosystem you may want to consider

Common Practice:

Grouping by features or routes

common/
  Avatar.js
  Avatar.css
  APIUtils.js
  APIUtils.test.js
feed/
  index.js
  Feed.js
  Feed.css
  FeedStory.js
  FeedStory.test.js
  FeedAPI.js
profile/
  index.js
  Profile.js
  ProfileHeader.js
  ProfileHeader.css
  ProfileAPI.js

if you are creating components , just create fileName.jsx | fileName.tsx -Recommended

src/body/body.jsx
import React from 'react';

export const Body = () => <div>
    <p>
        Embracing modern technology tears down the barriers to innovation and enables greater collaboration across the value chain. Forward-looking customer-centric systems, designed on modern architectures drive profitable and efficient business growth. While cloud-based platforms provide the flexibility to quickly adapt to rapidly changing market and consumer behavior, and deliver more brand engagement opportunities.

        From airline passenger services, air cargo management, loyalty management, to flight and crew operations, leading airlines worldwide turn to IBS Software to power their success. Our modular and mission-critical airline solutions cut across airline needs, end-to-end, so our customers can enjoy full platform integration or specific components. And that makes IBS Software unique in the travel industry.
    </p>
</div>


src/footer/footer.jsx
import React from 'react';


export const Footer = () => <nav>
    <h3>IBS Digital @ Copy right</h3>
</nav>

src/header/header.jsx
import React from 'react';


export const Header = () => <nav>
    <h1>IBS Digital</h1>
</nav>


src/layout/layout.jsx
import React from 'react';

import { Header } from '../header/header';
import { Body } from '../body/body';
import { Footer } from '../footer/footer';

export const Layout = () => <div>
    <Header />
    <Body />
    <Footer/>
</div>

src/App.js
import { Layout } from './layout/layout';
import React from 'react';

const  App = () => <Layout />

export default App;

src/index.js
import React from 'react';
import ReactDOM from 'react-dom'
import App from './App';


ReactDOM.render(<App />, document.getElementById('root'));
..............................................................................................					Styling - React 
.............................................................................................
}
/////////////////////////////////////////////////////////////////////////////////////////////
					Componet Composition -Component tree
..............................................................................................
How to add styling to component?  - CSS.

How to add css?

two ways:

using class attribute : external style.
using style attribute : inline

<h1 class="test">
<h1 style="test">

html syntax:
<div class="container">

</div>

React uses jsx syntax

Rule for html attributes

3. html attributes must be in in camel case

HTML ATTRIBUTES

accept acceptCharset accessKey action allowFullScreen alt async autoComplete
autoFocus autoPlay capture cellPadding cellSpacing challenge charSet checked
cite classID className colSpan cols content contentEditable contextMenu controls
controlsList coords crossOrigin data dateTime default defer dir disabled
download draggable encType form formAction formEncType formMethod formNoValidate
formTarget frameBorder hea	tep style summary
tabIndex target title type useMap value width wmode wrap


how to link css in react?

import css files inside index.js

can we import css?
yes, this is the concept of webpack.

you can import any thing - css,image,documents(static assets)

import './App.css';
import 'bootstrap/dist/css/bootstrap.css'
...................&&&&&&&&&&&&&&&&&.......................................................
                                Dynamic UI -  Data Binding
...........................................................................................

Data can be displayed using {placeholder}
Data can be number,string,boolean,object,array...

import React from 'react';
import ReactDOM from 'react-dom'
import 'bootstrap/dist/css/bootstrap.css'

const id = 1;
const name = "subramanian";
const status = true;
const address = {
    city: 'coimbatore'
}
const skills = ["React", "Microservices", "Devops"];

const Profile = () => <div>
    <h1>Profile Details</h1>
    <p>Id {id}</p>
    <p>Name {name}</p>
    <p>Status {status ? "Available" : "Not Available"}</p>
    <p>City {address.city}</p>
    <p>Skills</p>
    <ul>
        {
            skills.map((skill, index) => {
                return <li key={index}>{skill}</li>
            })
        }
    </ul>

</div>

const App = () => <div className="container">
    <Profile />
    <Profile />
    <Profile />
    <Profile />

</div>

ReactDOM.render(<App />, document.getElementById('root'));
.............................................................................................
				Property Pattern
.............................................................................................

The way to supply data to the compoent.

import React from 'react';
import ReactDOM from 'react-dom'
import 'bootstrap/dist/css/bootstrap.css'

// a is just variable, its value would be object
//a = {name:'subramanian'}
// function Greeter(a){
//     return <h3>{a.message} {a.name} </h3>
// }

// function Greeter(props){
//     return <h3>{props.message} {props.name} </h3>
// }
const Greeter = props => <h3>{props.message} {props.name} </h3>

const App = () => <div className="container">
    {/* {
         Greeter("Ram") 
      } */}
    {/*  name="Subramanian" - property=value */}
    <Greeter name="Subramanian" message="Hai" />
    <Greeter name="Subramanian" message="Hello" />
    <Greeter name="Subramanian" message="Greet" />

</div>

ReactDOM.render(<App />, document.getElementById('root'));
..............................................................................................

import React from 'react';
import ReactDOM from 'react-dom';
import 'bootstrap/dist/css/bootstrap.css'

const Profile = props => {
    return <div className="container">
        <h1>Id: {props.id}</h1>
        <h2>Name {props.firstName} {props.lastName}</h2>
        <h2>Status {props.status ? "Available" : "Not Available"}</h2>
        <h2>Contact {props.city} {props.contact.email}</h2>
        <p>Skills</p>
        <ul>
            {
                props.skills.map((skill, index) => {
                    return <li key={index}>{skill}</li>
                })
            }
        </ul>
    </div>
}

const App = () => {

    const city = "Coimbatore"
    const status = true;
    const contact = {
        email: 'subramanian.md@gmail.com',
        mobile: 1234567890
    }
    const skills = ["React", "Microservices", "Devops"];


    return <div>
        <Profile
            id={1}
            firstName="Subramanian"
            lastName="Murugan"
            city={city}
            status={status}
            contact={contact}
            skills={skills}
        />
        <Profile
            id={2}
            firstName="Subramanian"
            lastName="Murugan"
            city={city}
            status={status}
            contact={contact}
            skills={skills}

        />
        <Profile
            id={3}
            firstName="Subramanian"
            lastName="Murugan"
            city={city}
            status={status}
            contact={contact}
            skills={skills}

        />
    </div>
}


ReactDOM.render(<App />, document.getElementById('root'))
.............................................................................................


//object destructure.

// function printEmployee(employee) {
//     console.log(`Id ${employee.id}`)
//     console.log(`Name ${employee.name}`)
//     console.log(`City ${employee.address.city}`)

// }
// function printEmployee(employee) {
//     //extract object properties
//     const { id, name, address: { city } } = employee;
//     console.log(`Id ${id}`)
//     console.log(`Name ${name}`)
//     console.log(`City ${city}`)

// }

// function printEmployee({ id, name, address: { city } }) {
//     console.log(`Id ${id}`)
//     console.log(`Name ${name}`)
//     console.log(`City ${city}`)

// }

const printEmployee = ({ id, name, address: { city } }) => {
    console.log(`Id ${id}`)
    console.log(`Name ${name}`)
    console.log(`City ${city}`)
}
let employee = {
    id: 1,
    name: 'subramaian',
    address: {
        city: 'coimbatore'
    }
}
printEmployee(employee);

//Parameter and arg destructure.

let getStock = () => {
    return {
        symbol: 'google',
        price: 100,
        qty: 10
    }
}
stock = getStock();
console.log(stock.symbol, stock.price, stock.qty)

// let { symbol, price, qty } = getStock();
// console.log(symbol, price, qty)


// stock = getStock = (symbol,price,qty) => {
//     return {
//         symbol: symbol,
//         price: price,
//         qty: qty
//     }
// }

// stock = getStock = (symbol, price, qty) => {
//     //if key : localvariable is same, remove one
//     return {
//         symbol,
//         price,
//         qty
//     }
// }

stock = getStock = (symbol, price, qty) => ({
    symbol,
    price,
    qty
})
const { symbol, price, qty } = getStock('google', 100, 1000);
console.log(symbol, price, qty)
...............................................................................................
const Profile = props => {
    const { id, firstName, lastName, skills, status, city, contact: { email } } = props;
    return <div className="container">
        <h1>Id: {id}</h1>
        <h2>Name {firstName} {lastName}</h2>
        <h2>Status {status ? "Available" : "Not Available"}</h2>
        <h2>Contact {city} {email}</h2>
        <p>Skills</p>
        <ul>
            {
                skills.map((skill, index) => {
                    return <li key={index}>{skill}</li>
                })
            }
        </ul>
    </div>
}

const App = () => {

    const city = "Coimbatore"
    const status = true;
    const contact = {
        email: 'subramanian.md@gmail.com',
        mobile: 1234567890
    }
    const skills = ["React", "Microservices", "Devops"];


    return <div>
        <Profile
            id={1}
            firstName="Subramanian"
            lastName="Murugan"
            city={city}
            status={status}
            contact={contact}
            skills={skills}
        />
        <Profile
            id={2}
            firstName="Subramanian"
            lastName="Murugan"
            city={city}
            status={status}
            contact={contact}
            skills={skills}

        />
        <Profile
            id={3}
            firstName="Subramanian"
            lastName="Murugan"
            city={city}
            status={status}
            contact={contact}
            skills={skills}

        />
    </div>
}


ReactDOM.render(<App />, document.getElementById('root'))

............................................................................................

Class Component and Props:
.........................
import React, { Component } from 'react';
import ReactDOM from 'react-dom';
import 'bootstrap/dist/css/bootstrap.css'

//how to access props inside profile component

class Profile extends Component {

    render() {
        const { id, firstName, lastName, skills, status, city, contact: { email } } = this.props;
        return <div className="container">
            <h1>Id: {id}</h1>
            <h2>Name {firstName} {lastName}</h2>
            <h2>Status {status ? "Available" : "Not Available"}</h2>
            <h2>Contact {city} {email}</h2>
            <p>Skills</p>
            <ul>
                {
                    skills.map((skill, index) => {
                        return <li key={index}>{skill}</li>
                    })
                }
            </ul>
        </div>
    }
}

const Profile__ = props => {
    const { id, firstName, lastName, skills, status, city, contact: { email } } = props;
    return <div className="container">
        <h1>Id: {id}</h1>
        <h2>Name {firstName} {lastName}</h2>
        <h2>Status {status ? "Available" : "Not Available"}</h2>
        <h2>Contact {city} {email}</h2>
        <p>Skills</p>
        <ul>
            {
                skills.map((skill, index) => {
                    return <li key={index}>{skill}</li>
                })
            }
        </ul>
    </div>
}

const App = () => {

    const city = "Coimbatore"
    const status = true;
    const contact = {
        email: 'subramanian.md@gmail.com',
        mobile: 1234567890
    }
    const skills = ["React", "Microservices", "Devops"];


    return <div>
        <Profile
            id={1}
            firstName="Subramanian"
            lastName="Murugan"
            city={city}
            status={status}
            contact={contact}
            skills={skills}
        />

    </div>
}


ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
				  Default Props
..............................................................................................


import React from 'react';
import ReactDOM from 'react-dom'

//component
const Profile = props => {
    return <div>
        <h2>Name : {props.name} </h2>
        <h2>Star: {props.star}</h2>
        <h2>Status :{props.status ? "Active" : "InActive"}</h2>
        <address>City {props.address.city}</address>
        <h2>Friends</h2>
        <ul>
            {
                props.friends.map((friend,index) => {
                    return <li key={index}>{friend}</li>
                })
            }
        </ul>
    </div>
}
//default Props
Profile.defaultProps = {
    name: 'name',
    star: 0,
    status: false,
    address: {
        city: 'city'
    },
    friends: ['friend-0']

}


const App = () => {
    const name = "Subramanian";
    const star = 4.5
    const status = true;
    //object
    const address = {
        city: 'Coimbatore'
    }
    //
    const friends = ["Dodge", "Luke", "Nikson", "Milles"]
    return <div>
        <Profile name={name} star={star} friends={friends} status={status} address={address} />
        <Profile  />
    </div>
}

ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................				     Property Constraints
..............................................................................................

import React from 'react';
import ReactDOM from 'react-dom'
import PropTypes from 'prop-types';

//component
const Profile = props => {
    return <div>
        <h2>Name : {props.name} </h2>
        <h2>Star: {props.star}</h2>
        <h2>Status :{props.status ? "Active" : "InActive"}</h2>
        <address>City {props.address.city}</address>
        <h2>Friends</h2>
        <ul>
            {
                props.friends.map((friend,index) => {
                    return <li key={index}>{friend}</li>
                })
            }
        </ul>
    </div>
}
//default Props
Profile.defaultProps = {
    name: 'name',
    star: 0,
    status: false,
    address: {
        city: 'city'
    },
    friends: ['friend-0']

}
//props types
Profile.propTypes = {
    name: PropTypes.string,
    star: PropTypes.number
}

const App = () => {
    const name = "Subramanian";
    const star = 4.5
    const status = true;
    //object
    const address = {
        city: 'Coimbatore'
    }
    //
    const friends = ["Dodge", "Luke", "Nikson", "Milles"]
    return <div>
        <Profile name={name} star={star} friends={friends} status={status} address={address} />
        <Profile  />
        {/* <Profile  star="test" /> */}

    </div>
}

ReactDOM.render(<App />, document.getElementById('root'))
.............................................................................................
..............................................................................................
				Data Mutation and Props
..............................................................................................


Should we change the props value inside component?
No!.

Props values are read only.

import React from 'react';
import ReactDOM from 'react-dom'

const Greeter = props => {
    //override the name prop
    props.name = "foo";
    return <h1>
        Hello {props.name}!
    </h1>
}

const App = () => <div>
    <Greeter name="Subramanian" />
</div>



ReactDOM.render(<App />, document.getElementById('root'))

TypeError: Cannot assign to read only property 'name' of object '#<Object>'
Greeter
E:/session/inspop/my-app/src/index.js:6
  3 | 
  4 | const Greeter = props => {
  5 |     //override the name prop
> 6 |     props.name = "foo";
  7 |     return <h1>
  8 |         Hello {props.name}!
  9 |     </h1>


Why props are read only?
Compoent Design Principles:

	Component is designed based on functional programming principles.

1.Pure function

A.function receives the set of args, which should return the same.

  eg
     function Greeter(name,message){

             return name + message
     }

    Greeter('foo','hai')

   function getStock(value){ 
      return value;
   }

function should not do side effects(changing the input parameters, local variable,IO operation), if fun does, that function is called impure function.

B. to be discussed later.


In React where pure function is used.
 
  In the component design.

Every Component is pure function with respect props.
Every component receives props as parameter , returns the same without mutation.
  

Impure function
const Greeter = props => {
    //override the name prop :mutation
   props.name = "foo";
    return <h1>
        Hello {props.name}!
    </h1>
}

because we try to mutate name prop. -  dont do this.

According to pure function pattern, component has no right to change the data, just it is receiver and which displays only.

			Props are read only , Component is pure
..............................................................................................
		  Component Driven Design:Thinking in Components:Component Communication
..............................................................................................

Components should be broken into smallar and reusable.


Component Communication:

1.Parent to child

2.Child to Parent

3.Across the components 


1.Parent to child Communication:


import React from 'react';
import ReactDOM from 'react-dom';
import logo from './logo.svg';

const Movie = props => {
    return <div>
        {/* <MovieDetails
            title={props.title}
            review={props.review}
            actor={props.actor}
            director={props.director}
        /> */}
        {/* Spread Operator which passes the entire property in one short */}
        <MovieDetails {...props} />
    </div>
}
const MovieDetails = props => <div>
    <h1>Title  {props.title}</h1>
    <Actor actor={props.actor} />
    <Director director={props.director} />
    <Review review={props.review} />
</div>

const Actor = props => {
    return <h2>Actor :  {props.actor.name}</h2>
}
const Director = props => {
    return <h2>Director :  {props.director.name}</h2>
}


const Review = props => {
    return <div>
        <User user={props.review.user} />
        <Language languages={props.review.languages} />
        <Comment comment={props.review.comment} />
    </div>
}
const User = props => {
    return <div>
        <h4>User {props.user.name}</h4>
        <Avatar url={props.user.imgUrl} />
    </div>
}
const Avatar = props => <img height="50" width="50" src={props.url} />


const Language = props => {
    return <div>
        <LanguageList languages={props.languages} />
    </div>
};
const LanguageList = props => <ul>
    {
        props.languages.map((lng, index) => {
            return <li key={index}>{lng}</li>
        })
    }
</ul>
const Comment = props => {
    return <div>
        <h3>{props.comment.text}</h3>
    </div>
}

const review = {
    user: {
        name: 'Subramanian',
        imgUrl: logo
    },
    languages: ['english', 'tamil', 'hindi'],
    comment: {
        text: 'It is really good!',
        date: new Date()
    }
}
const actor = {
    name: 'Dodge'
}
const director = {
    name: 'Miles'
}
const App = () => <div>
    <Movie title="The Hunter" actor={actor} director={director} review={review} />
</div>


ReactDOM.render(<App />, document.getElementById('root'))
.............................................................................................
				conditional Rendering
.............................................................................................
How to render component depending upon the state of your application?
How to add conditions? - if or tenary.



import React from 'react';
import ReactDOM from 'react-dom'

const PremiumUser = props => <div>
    <h1>You are PremiumUser</h1>
</div>

const GuestUser = props => <div>
    <h1>You are Guest</h1>
</div>
const Page__ = props => {
    const isLoggedIn = props.isLoggedIn;
    if (isLoggedIn) {
        return <PremiumUser />
    } else {
        return <GuestUser />
    }
}

const Page___ = props => {
    const isLoggedIn = props.isLoggedIn;
    return isLoggedIn ? <PremiumUser /> : <GuestUser />
}
const Page = ({ isLoggedIn }) => isLoggedIn ? <PremiumUser /> : <GuestUser />

Page.defaultProps = {
    isLoggedIn: false
}

const isLoggedIn = true
const App = () => <div>
    <Page isLoggedIn={isLoggedIn} />
</div>


ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
				 What can be a prop?

1.Data can be prop
2.Component as prop
3.function as prop

import React from 'react';
import ReactDOM from 'react-dom'

const Page = props => <div>
        {props.children}
</div>

const Header = props => <h1>IBS</h1>

const App = () => <div>
    <Page>
        {/* Component as prop -  child */}
        <Header />
        <p>
            IBS is based on Airline solutions company
        </p>
    </Page>
</div>


ReactDOM.render(<App />, document.getElementById('root'))


..............................................................................................
				Fragements
..............................................................................................

JSX Rule:

1.YOu must wrapp sibblings inside container elements

Valid
 <div>
   <h1>
   <p>
   <img>
   <Trader/>
 </div>

Invalid:
   <h1>
   <p>
   <img>
   <Trader/>
............
What is Fragment?

A  common pattern in React is for a component return multiple elements.


function Greeter (){
   return <h1></h1><p></p>
}

Here , the code throws error , the reason being , we cant have elements without root element.

This rule some times, makes ui layout complex. sometime which may make difficult to adjust the ui layouts.



import React, { Fragment } from 'react';
import ReactDOM from 'react-dom'

//Grid Component : using tables
/**
 * <table>
 *   <thead> </thead>
 *   <tr><td></td></tr>
 *   <tr><td></td></tr>
 *   <tr><td></td></tr>
 * </table>
 */
const Grid = props => {
    return <table border="1">
        <thead >
            <Columns />

        </thead>
        <GridBody users={props.datasource} />
    </table>
}


const GridBody = props => {
    return <>
        <tbody>
            {
                props.users.map((user, index) => {
                    return <tr key={index}>
                        <th scope="row">{user.id}</th>
                        <td>{user.name}</td>
                        <td>{user.email}</td>
                    </tr>
                })
            }

        </tbody>
    </>
}
const Columns = props => {
    // return <React.Fragment>
    //     <td>Name</td>
    //     <td>Location</td>
    // </React.Fragment>
    //     return <Fragment>
    //     <td>Name</td>
    //     <td>Location</td>
    // </Fragment>
    return <>
        <td>Name</td>
        <td>Location</td>
        <td>Email</td>

    </>
}

const Page = props => <div>
    {props.children}
</div>
const USERS = [
    { id: 1, name: 'subramaian', email: 'subu@gmail.com' },
    { id: 2, name: 'Dodge', email: 'dodge@gmail.com' }
]
const App = () => <div>
    <Page>
        <Grid datasource={USERS} />
    </Page>
</div>

ReactDOM.render(<App />, document.getElementById('root'))
.............................................................................................
			            Context				
.............................................................................................
What is Context?
 
Object helps to transfer data from parent to anywhere in herierchy.

Context provides a way to pass data through the component tree without having to pass props down manually at every level.

When to use context?

Context is designed to share data that can considered "global" for a tree of React components
such as theme , login data, preferred langugage.



Without Context:



import React from 'react';
import ReactDOM from 'react-dom'

const Toolbar = props => <div>
    <ThemedButton theme={props.theme} />
</div>

const ThemedButton = props => <div>
    <Button theme={props.theme} />
</div>
const Button = props => <div>
    <button style={{ color: 'whitesmoke', backgroundColor: props.theme }}>Hello!</button>
</div>
const Page = props => <>
    <Toolbar theme={props.theme} />
</>
const theme = {
    dark: "black"
}
const App = () => <div>
    <Page theme={theme.dark} />
</div>


ReactDOM.render(<App />, document.getElementById('root'))



With Context:
............
import React from 'react';
import ReactDOM from 'react-dom'

const theme = {
    dark: "black"
}
//create context Object

// const ThemeContext = React.createContext('dark')
const { Provider, Consumer } = React.createContext('dark')

//provider who provides data to child component.

	
const Page = props => <>
    <Toolbar />
</>
const Toolbar = props => <div>
    <ThemedButton />
</div>

const ThemedButton = props => <div>
    <Consumer>
        {
            theme => {
                return <Button theme={theme.dark} />
            }
        }
    </Consumer>
</div>
const Button = props => <div>
    <button style={{ color: 'whitesmoke', backgroundColor: props.theme }}>Hello!</button>
</div>


ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
				State
..............................................................................................

state :

state is another way of representing data inside component.

Points:

1.with respect to props, component never modifies data / component never mutates the data.
  -Based on fp principle called "pure function".

2.what if i want to change data /mutate data?
 props never help us, then we need to look at new pattern , that is called state.

state helps to modifiy data/ mutate data.

Component can change the data.

How Component can change the data?

-Via State

How state can be changed

-Via Events

When ever the component change the data via events, component need to repaint, React uses an alogorthim "Diff algorthim" - virtual dom.

State changes should be done in pure function.

Note : 

 state and event handling can be done in class Components only which is before React 16.

 After React 16, Event handling and state mutatation is possible via "hooks".


//pure function 
//A. if function receives an input, it should return the same
//pure
function Profile(person) {
    return person;
}
console.log(Profile({ name: 'Subramanian' }))

//Side Effects: if the function tries to change input parameters,localsate
//impure function
function ProfileV1(person) {
    //mutate the name and return
    person.name = 'foo' //side effects
    return person;
}
console.log(ProfileV1({ name: 'Subramanian' }))

//I need to create pure function but i need mutate the data.
//Immutablity: feature through which you can muate state and make the function pure.
//React uses immutablity pattern to change the state, makes the function pure

function ProfileV2(profile, city) {
    //you have to apply immutablity algorthim to make this function pure
    // return {
    //     name: profile.name,
    //     city: city
    // } //return new Object
    // profile.name = 'foo' //side effects
    // return profile;

    //using Object.assign
    // return Object.assign({}, profile, { city })
    //using spread operator
    return { ...profile, city }

}
let profile = { name: 'Subramanian', city: 'Coimbatore' };
//Freeze the object before modification.
Object.freeze(profile);

console.log(ProfileV2(profile, 'Chennai'))

//
//immpure function
// function addItem(items) {
//     //add 
//     items.push(4);
//     return items;
// }
//Pure function version
function addItem(items) {
   // return items.concat(4);
   return [...items, 4];
}
let items = [1, 2, 3];
Object.freeze(items);

console.log('Old Items => ', items);
let newItems = addItem(items)
console.log('new Items => ', newItems);

import React, { Component } from 'react';
import ReactDOM from 'react-dom';

class Review extends Component {
    //data: is encapsulated inside object, pointed by state variable
    state = {
        like: 0, // inital state 
        dislike: 10
    }
    //event listener : event is just variable points to Synthentic Event Object 
    onIncrement = event => {
        //pure function to update the state.
        this.setState((prevState) => {
            //return immutable state
            // return {
            //    like: prevState.like + 1
            // }
            // return Object.assign({}, prevState, { like: prevState.like + 1 })

            return { ...prevState, like: prevState.like + 1 }
        })
    }
    render() {
        console.log(this.state)
        return <div>
            <h1>Review App</h1>
            <h2>Likes  {this.state.like} Dislikes : {this.state.dislike}</h2>
            <button onClick={this.onIncrement} >Like</button>
            <button onClick={() => {
                this.setState((prevState) => ({
                    ...prevState, dislike: prevState.dislike + 1
                }))
            }} >Dislike</button>

        </div>
    }
}
const App = () => <div>
    <Review />
</div>
ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
			   Complex State Mutation
.............................................................................................

How to mutate the nested Objects using spread operator/object.assign?


let customer = {
    id: 1,
    name: 'Subramanian',
    contact: {
        address: {
            city: 'Coimbatore'
        },
        communication: {
            mobileno: '9000000000'
        }
    }
}

How to change mobileNo of a customer 

const updatedCustomer = updateMobileNo(customer, '9003706368')



function updateMobileNo(customer, mobileno) {
    return {
        ...customer,
        contact: {
            ...customer.contact,
            communication: {
                ...customer.contact.communication,
                mobileno: mobileno
            }
        }
    }
}

let customer = {
    id: 1,
    name: 'Subramanian',
    contact: {
        address: {
            city: 'Coimbatore'
        },
        communication: {
            mobileno: '9000000000'
        }
    }
}
console.log(customer);

const updatedCustomer = updateMobileNo(customer, '9003706368')
console.log("Same Object (customer===updatedCustomer) ? =>", customer === updatedCustomer);
console.log(updatedCustomer);

..............................................................................................
					immer.js
				 (Very Smart immutable lib)
..............................................................................................

import produce from "immer";

function updateMobileNo(customer, mobileno) {

    return {
        ...customer,
        contact: {
            ...customer.contact,
            communication: {
                ...customer.contact.communication,
                mobileno: mobileno
            }
        }
    }

}

//
function updateMobileNoImmer(customer, mobileno) {

    return produce(customer, draft => {
        //write logic of changing state : mutable way of writing immutable
        draft.contact.communication.mobileno = mobileno;
    })

}




let customer = {
    id: 1,
    name: 'Subramanian',
    contact: {
        address: {
            city: 'Coimbatore'
        },
        communication: {
            mobileno: '9000000000'
        }
    }
}
console.log(customer);

const updatedCustomer = updateMobileNoImmer(customer, '9003706368')
console.log("Same Object (customer===updatedCustomer) ? =>", customer === updatedCustomer);
console.log(updatedCustomer);

import React, { Component } from 'react';
import ReactDOM from 'react-dom';
import produce from "immer";

class Review extends Component {
    //data: is encapsulated inside object, pointed by state variable
    state = {
        like: 0, // inital state 
        dislike: 10
    }
    //event listener : event is just variable points to Synthentic Event Object 
    onIncrement = event => {
        //pure function to update the state.
        this.setState((prevState) => {
            //return immutable state
            // return {
            //    like: prevState.like + 1
            // }
            // return Object.assign({}, prevState, { like: prevState.like + 1 })

            //return { ...prevState, like: prevState.like + 1 }
            return produce(prevState, draft => {
                draft.like += 1
            })
        })
    }
    render() {
        console.log(this.state)
        return <div>
            <h1>Review App</h1>
            <h2>Likes  {this.state.like} Dislikes : {this.state.dislike}</h2>
            <button onClick={this.onIncrement} >Like</button>
            <button onClick={() => {
                this.setState((prevState) => ({
                    ...prevState, dislike: prevState.dislike + 1
                }))
            }} >Dislike</button>

        </div>
    }
}
const App = () => <div>
    <Review />
</div>
ReactDOM.render(<App />, document.getElementById('root'))
.............................................................................................
		  State,Props,Container Components and Presentational Components
.............................................................................................

Property types:
1.static prop - hardcoded
2.dynamic prop - state as a prop
3.function as prop


import React, { Component } from 'react';
import ReactDOM from 'react-dom';
import produce from 'immer';

//container components
class Counter extends Component {
    //state 
    state = {
        value: 0
    }
    //biz logic
    onIncrement = event => {
        this.setState(prevState => {
            return produce(prevState, draft => {
                draft.value += 1
            });
        })
    };
    //UI
    render() {
        return <>
            <CounterView {...this.state} onIncrement={this.onIncrement} />
        </>
    }
}
//Presentational component
const CounterView = props => {
    return <>
        <h1>State + Props</h1>
        <h2>Value {props.value}</h2>
        <button onClick={props.onIncrement}>+</button>
    </>
}

const App = props => <div>
    <Counter />
</div>;
ReactDOM.render(<App />, document.getElementById('root'))

.............................................................................................
.............................................................................................
			   Input,SyntheticEvent
..............................................................................................

import React, { Component } from 'react';
import ReactDOM from 'react-dom';
import produce from 'immer';

class TodoApp extends Component {
    state = {
        items: [],
        text: ''
    }

    handleChange = evt => {
        this.setState(prvState => {
            // return {
            //     items: prvState.items,
            //     text: evt.target.value
            // }
            return produce(prvState, draft => {
                draft.text = evt.target.value
            });
        })
    }

    handleSubmit = evt => {
        //stop firing default event submission
        evt.preventDefault();
        if (this.state.text.length === 0) {
            return;
        }
        const newItem = {
            text: this.state.text,
            id: Math.random()
        }
        this.setState(prvState => {
            //return { ...preState, items: preState.items.concat(newItem), text: '' }
            return produce(prvState, draft => {
                draft.items.push(newItem)
                draft.text = ''
            });
        })
    }

    render() {
        return <>
            <h3>TODO</h3>
            <TodoList items={this.state.items} />
            <form onSubmit={this.handleSubmit}>
                <label htmlFor="new-todo">What needs to be done?</label>
                <input id="new-todo" onChange={this.handleChange} value={this.state.text} />
                <button>Add #{this.state.items.length + 1}</button>
            </form>
        </>
    }
}
const TodoList = props => {
    return <ul>
        {props.items.map(item => {
            return <li key={item.id}>{item.text}</li>
        })}
    </ul>
}

const App = props => <div>
    <TodoApp />
</div>;
ReactDOM.render(<App />, document.getElementById('root'))
.............................................................................................
 Component Life Cycles - Rest api integration



Life cycle:

Phases:

1.Mount
 -constructor
    called only once, for compoent initalization
  constructors are not used very much
 -render 
    called for creating object tree(component tree) -  Virtual DOM.
 -componentDidMount
   called only one time, to ensure that vdom has transfered as real time.

2.Update
  new Props / setState/ forceUpdate trigger update cycle
  
  -render 
   
  -componentDidupdate
    called after every update process is done

3.UnMount
   if any component is removed from the dom tree.

  componentWillUnMount
    used to clean up resources

import React, { Component } from 'react';
import ReactDOM from 'react-dom';

class Parent extends Component {

    state = {
        value: 0
    }
    //constructors
    constructor() {
        super()
        console.log('Parent Constructor')
    }
    render() {
        console.log('Parent render is called')
        return <>
            <Child />
            <button onClick={() => {
                this.setState(state => {
                    return {
                        value: state.value + 1
                    }
                })
            }}>Increment</button>
        </>
    }
    componentDidMount() {
        console.log('Parent - componentDidMount  is called')
    }
    componentDidUpdate() {
        console.log('Parent - componentDidUpdate  is called')

    }

}
class Child extends Component {
    //constructors
    constructor() {
        super()
        console.log('Child Constructor')
    }
    render() {
        console.log('Child render is called')
        return <>
        </>
    }
    componentDidMount() {
        console.log('Child - componentDidMount  is called')

    }
    componentDidUpdate() {
        console.log('Child - componentDidUpdate  is called')

    }

}

const App = props => <div>
    <Parent />
</div>
ReactDOM.render(<Parent />, document.getElementById('root'))
import React, { Component } from 'react';
import ReactDOM from 'react-dom';

class TodoApp extends Component {

    state = {
        error: null,
        isLoaded: false,
        todos: []
    }

    render() {
        const { error, isLoaded, todos } = this.state;
        if (error) {
            return <div>Error : {error.message}</div>
        }
        else if (!isLoaded) {
            return <div>Loading....</div>
        } else {
            return <>
                <ul>
                    {todos.map((todo, index) => {
                        return <li key={index}>
                            {todo.title} - {todo.completed ? 'Completed' : 'Not Completed'}
                        </li>
                    })}
                </ul>
            </>
        }


    }
    componentDidMount() {
        const url = 'https://jsonplaceholder.typicode.com/todos'
        
        fetch(url).then(async (response) => {
            const todos = await response.json();
            this.setState(prevState => {
                return {
                    error: prevState.error,
                    isLoaded: true,
                    todos: todos
                }
            })
        }, error => {
            this.setState(prevState => {
                return {
                    error: error,
                    isLoaded: true,
                    todos: prevState.todos
                }
            })
        })
    }


}

const App = props => <div>
    <TodoApp />
</div>
ReactDOM.render(<App />, document.getElementById('root'))
..............................................................................................
				Hooks
.............................................................................................
Hooks lets you use state and other react features without writing a class.

Hooks Movtivations:

1.Avoid confussion between class and function components.

2.Reuse statefull logics among components

3.Component composition of logic is possible.

Hooks 
What is hook in nutshell?

 hook is a function  which may return value.

hook function naming Convention:

"use"+functionName ==>hook Syntax
"useState"
"useContext"
"useEffect"
"useAjax"
"useWebSocket"
etc....

How to avoid state -setState ? How to introduce state inside functional component.




import React, { useState } from 'react';
import ReactDOM from 'react-dom'


//Function + state + setState.
const CounterApp = props => {
    //state:
    const [value, setValue] = useState(0)
    const onIncrement = evt => {
        setValue(prvValue => {
            return prvValue + 1
        })
    }
    return <>
        <h1>Counter App</h1>
        <h2>Value : {value}</h2>
        <button onClick={onIncrement}>+</button>
    </>
}

const App = props => <div>
    <CounterApp />
</div>
ReactDOM.render(<App />, document.getElementById('root'))
.............................................................................................

............................................................................................
	                   literal objects and hooks,immer produce
............................................................................................

import produce from 'immer';
import React, { useState } from 'react';
import ReactDOM from 'react-dom';


const Counter = props => {
    const initalState = {
        values: {
            inc: 10
        }
    };
    const [counter, setCounter] = useState(initalState);
    const onIncrement = evt => {
        setCounter(produce(state => {
            state.values.inc += 1;
        }));
    };

    return <>
        <h1>Counter App-Using State and Hooks</h1>
        <h1>Value : {counter.values.inc}</h1>
        <button onClick={onIncrement}>+</button>
    </>

};
const App = () => {
    return <Counter />
}
ReactDOM.render(<App />, document.getElementById('root'));


............................................................................................

			 ComponentDidMount and ComponentDidUpdate
		              How to Replace using Hooks
				  useEffect


Side Effects , DOM Manipulation,ResourceManagement:
...................................................

What is Side effects?

Changining DOM elements after vdom is mounted into real dom - componentDidMount.

import produce from 'immer';
import React, { useState, useEffect } from 'react';
import ReactDOM from 'react-dom';


const Page = props => {
    const [count, setCount] = useState(0)
    //compoentDidMount
    useEffect(() => {
        document.title = `You have clicked ${count} times`
    })
    return <>
        <button onClick={() => setCount(count + 1)}>Hit</button>
    </>
};
const App = () => {
    return <Page />
}
ReactDOM.render(<App />, document.getElementById('root'));
..............................................................................................
.............................................................................................
				Multihooks 
.............................................................................................
How many hooks we can have in a component?

many.
import produce from 'immer';
import React, { useState, useEffect } from 'react';
import ReactDOM from 'react-dom';


const Counter = props => {
    const [count, setCount] = useState(0)
    const [like, setLike] = useState(10);

    //compoentDidMount
    useEffect(() => {
        document.title = `You have clicked ${count} times`
    })
    useEffect(() => {
        setTimeout(() => {
            alert('You have been hacked')
        }, 10000)
    })
    return <>
        <h1>Likes {like}</h1>
        <button onClick={() => setCount(count + 1)}>Hit</button>
        <button onClick={() => setLike(like + 2)}>Like</button>
    </>
};
const App = () => {
    return <Counter />
}
ReactDOM.render(<App />, document.getElementById('root'));
.............................................................................................

	ComponentwillUnMount - useEffect Hook.
   useEffect(() => {
        document.title = `You have clicked ${count} times`
 
        return function() {
           //component clean up code
        }

    })

import produce from 'immer';
import React, { useState, useEffect } from 'react';
import ReactDOM from 'react-dom';


const Counter = props => {
    const [count, setCount] = useState(0)
    const [like, setLike] = useState(10);

    useEffect(() => {
        document.title = `You have clicked ${count} times`
        //clean up code
        return function () {
            //unsubscrption/closing sockets....
            console.log('clean')
        }
    })
    return <>
        <h1>Likes {like}</h1>
        <button onClick={() => setCount(count + 1)}>Hit</button>
        <button onClick={() => setLike(like + 2)}>Like</button>
    </>
};
const App = () => {
    return <Counter />
}
ReactDOM.render(<App />, document.getElementById('root'));
..............................................................................................
..............................................................................................
Built in Hooks from React itself:
-useState
-useEffect
-useContext

-useReducer
-useCallback
-useMemo
-useRef
-useLayoutEffect
etc....



//Custom Hooks
import React, { useEffect, useState } from 'react';
import ReactDOM from 'react-dom';

//features;

const Customer = props => {
    //feature-1 update Screen title
    const [screen, setScreen] = useState('Customer Manager App')
    //feature 2 - get Window width
    const [width, setWidth] = useState(window.innerWidth);

    //useEffect to update window title after component mounted into dom
    useEffect(() => {
        document.title = screen;
    })
    
    useEffect(() => {
        const handleResize = () => setWidth(window.innerWidth)
        //imperative dom listner
        window.addEventListener('resize', handleResize)
        //clean up code
        return () => {
            window.removeEventListener('resize', handleResize);
        }
    });

    return <div>
        <h1>Custom Hooks</h1>
        <h1>Current Window width {width}</h1>
        <button onClick={() => {
            setScreen('CustomerManager App-Update')
        }}>Update Title</button>
    </div>
};

const App = () => {
    return <div>
        <Customer />
    </div>
}
ReactDOM.render(<App />, document.getElementById('root'));

.............................................................................................

src/hooks/usewindowtitlehook.js

import { useState, useEffect } from 'react';


function useWindowTitle(windowTitle = '') {
    const [screen, setScreen] = useState(windowTitle)
    //useEffect to update window title after component mounted into dom
    useEffect(() => {
        document.title = screen;
    })
    //return object, so that caller can use this api
    return {
        screen,
        setScreen
    };
}

export { useWindowTitle };

src/hooks/usewindowwidthhook.js
import { useState, useEffect } from 'react';



function useWindowWidth() {
    const [width, setWidth] = useState(window.innerWidth);

    useEffect(() => {
        const handleResize = () => setWidth(window.innerWidth)
        //imperative dom listner
        window.addEventListener('resize', handleResize)
        //clean up code
        return () => {
            window.removeEventListener('resize', handleResize);
        }
    });
    return width;
}

export { useWindowWidth }
..............................................................................................

src/index.js
//Custom Hooks
import React, { useEffect, useState } from 'react';
import ReactDOM from 'react-dom';
import { useWindowTitle } from './hooks/usewindowtitlehook';
import { useWindowWidth } from './hooks/usewindowwidth';

//features;

const Customer = props => {
    //feaature-1 update Screen title
    const {setScreen } = useWindowTitle('Customer Manager')
    //feature 2 - get Window width
    const width = useWindowWidth();
    return <div>
        <h1>Custom Hooks</h1>
        <h1>Current Window width {width}</h1>
        <button onClick={() => {
            setScreen('CustomerManager App-Update')
        }}>Update Title</button>
    </div>
};

const App = () => {
    return <div>
        <Customer />
    </div>
}
ReactDOM.render(<App />, document.getElementById('root'));









